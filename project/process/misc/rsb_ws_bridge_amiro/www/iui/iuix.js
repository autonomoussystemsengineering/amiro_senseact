(function(){var _1=20;var _2=0;var _3=30000;var _4=null;var _5=null;var _6=null;var _7=0;var _8=0;var _9=location.hash;var _a="#_";var _b=[];var _c=0;var _d;var _e=false;var _f="portrait";var _10="landscape";window.iui={logging:false,busy:false,animOn:true,ajaxErrHandler:null,httpHeaders:{"X-Requested-With":"XMLHttpRequest"},showPage:function(_11,_12){if(_11){if(_11==_5){log("page = currentPage = "+_11.id);iui.busy=false;return;}if(_6){_6.removeAttribute("selected");sendEvent("iui.blur",_6);_6=null;}if(hasClass(_11,"dialog")){iui.busy=false;sendEvent("iui.focus",_11);showDialog(_11);}else{sendEvent("iui.load",_11);var _13=_5;sendEvent("iui.blur",_5);_5=_11;sendEvent("iui.focus",_11);if(_13){setTimeout(slidePages,0,_13,_11,_12);}else{updatePage(_11,_13);}}}},gotoView:function(_14,_15){var _16,nodeId;if(_14 instanceof HTMLElement){_16=_14;nodeId=_16.id;}else{nodeId=_14;_16=$(nodeId);}if(!_16){log("gotoView: node is null");}if(!iui.busy){iui.busy=true;var _17=_b.indexOf(nodeId);var _18=_17!=-1;if(_18){_b.splice(_17);}else{if(_15){_b.pop();}}iui.showPage(_16,_18);return false;}else{return true;}},showPageById:function(_19){iui.gotoView(_19,false);},goBack:function(){iui.gotoView(_b.slice(-2,-1)[0],false);},replacePage:function(_1a){gotoView(_1a,true);},showPageByHref:function(_1b,_1c,_1d,_1e,cb){function spbhCB(xhr){log("xhr.readyState = "+xhr.readyState);if(xhr.readyState==4){if((xhr.status==200||xhr.status==0)&&!xhr.aborted){var _21=document.createElement("div");_21.innerHTML=xhr.responseText;sendEvent("iui.beforeinsert",document.body,{fragment:_21});if(_1e){replaceElementWithFrag(_1e,_21);iui.busy=false;}else{iui.insertPages(_21);}}else{iui.busy=false;if(iui.ajaxErrHandler){iui.ajaxErrHandler("Error contacting server, please try again later");}}if(cb){setTimeout(cb,1000,true);}}}if(!iui.busy){iui.busy=true;iui.ajax(_1b,_1c,_1d,spbhCB);}else{cb();}},ajax:function(url,_23,_24,cb){var xhr=new XMLHttpRequest();_24=_24?_24.toUpperCase():"GET";if(_23&&_24=="GET"){url=url+"?"+iui.param(_23);}xhr.open(_24,url,true);if(cb){xhr.onreadystatechange=function(){cb(xhr);};}var _27=null;if(_23&&_24!="GET"){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");_27=iui.param(_23);}for(var _28 in iui.httpHeaders){xhr.setRequestHeader(_28,iui.httpHeaders[_28]);}xhr.send(_27);xhr.requestTimer=setTimeout(ajaxTimeout,_3);return xhr;function ajaxTimeout(){try{xhr.abort();xhr.aborted=true;}catch(err){log(err);}}},param:function(o){var s=[];for(var key in o){var _2c=o[key];if(typeof (_2c)=="object"&&typeof (_2c.length)=="number"){for(var i=0;i<_2c.length;i++){s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(_2c[i]);}}else{s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(_2c);}}return s.join("&").replace(/%20/g,"+");},insertPages:function(_2e){var _2f=_2e.childNodes;var _30;for(var i=0;i<_2f.length;++i){var _32=_2f[i];if(_32.nodeType==1){if(!_32.id){_32.id="__"+(++_c)+"__";}var _33=$(_32.id);var _34;if(_33){_33.parentNode.replaceChild(_32,_33);_34=$(_32.id);}else{_34=document.body.appendChild(_32);}sendEvent("iui.afterinsert",document.body,{insertedNode:_34});if(_32.getAttribute("selected")=="true"||!_30){_30=_32;}--i;}}sendEvent("iui.afterinsertend",document.body,{fragment:_2e});if(_30){iui.showPage(_30);}},getSelectedPage:function(){for(var _35=document.body.firstChild;_35;_35=_35.nextSibling){if(_35.nodeType==1&&_35.getAttribute("selected")=="true"){return _35;}}},getAllViews:function(){var _36=document.body.children;var _37=[];for(var i=0;i<_36.length;i++){if(!this.hasClass(_36[i],"toolbar")){_37.push(_36[i]);}}return _37;},isNativeUrl:function(_39){for(var i=0;i<iui.nativeUrlPatterns.length;i++){if(_39.match(iui.nativeUrlPatterns[i])){return true;}}return false;},nativeUrlPatterns:[new RegExp("^http://maps.google.com/maps?"),new RegExp("^mailto:"),new RegExp("^tel:"),new RegExp("^http://www.youtube.com/watch\\?v="),new RegExp("^http://www.youtube.com/v/"),new RegExp("^javascript:"),new RegExp("^sms:"),new RegExp("^callto:")],hasClass:function(_3b,_3c){var re=new RegExp("(^|\\s)"+_3c+"($|\\s)");return re.exec(_3b.getAttribute("class"))!=null;},addClass:function(_3e,_3f){if(!iui.hasClass(_3e,_3f)){_3e.className+=" "+_3f;}},removeClass:function(_40,_41){if(iui.hasClass(_40,_41)){var reg=new RegExp("(\\s|^)"+_41+"(\\s|$)");_40.className=_40.className.replace(reg," ");}}};addEventListener("load",function(_43){var _44=iui.getSelectedPage();var _45=getPageFromLoc();if(_44){_4=_44;iui.showPage(_44);}if(_45&&(_45!=_44)){iui.showPage(_45);}setTimeout(preloadImages,0);if(typeof window.onorientationchange=="object"){window.onorientationchange=orientChangeHandler;_e=true;setTimeout(orientChangeHandler,0);}setTimeout(checkOrientAndLocation,0);_d=setInterval(checkOrientAndLocation,300);},false);addEventListener("unload",function(_46){return;},false);addEventListener("click",function(_47){var _48=findParent(_47.target,"a");if(_48){function unselect(){_48.removeAttribute("selected");}if(_48.href&&_48.hash&&_48.hash!="#"&&!_48.target){followAnchor(_48);}else{if(_48==$("backButton")){iui.goBack();}else{if(_48.getAttribute("type")=="submit"){var _49=findParent(_48,"form");if(_49.target=="_self"){if(typeof _49.onsubmit=="function"){if(_49.onsubmit()==true){_49.submit();}}else{_49.submit();}return;}submitForm(_49);}else{if(_48.getAttribute("type")=="cancel"){cancelDialog(findParent(_48,"form"));}else{if(_48.target=="_replace"){followAjax(_48,_48);}else{if(iui.isNativeUrl(_48.href)){return;}else{if(_48.target=="_webapp"){location.href=_48.href;}else{if(!_48.target&&_48.href){followAjax(_48,null);}else{return;}}}}}}}}_47.preventDefault();}},true);addEventListener("click",function(_4a){var div=findParent(_4a.target,"div");if(div&&hasClass(div,"toggle")){div.setAttribute("toggled",div.getAttribute("toggled")!="true");_4a.preventDefault();}},true);addEventListener("click",function(_4c){var _4d=findParent(_4c.target,"input");if(_4d&&_4d.type=="submit"){_4d.setAttribute("submitvalue",_4d.value);}},true);addEventListener("submit",function(_4e){var _4f=_4e.target;if(_4f.target!="_self"){_4e.preventDefault();submitForm(_4f);}},true);function followAnchor(_50){_50.setAttribute("selected","true");var _51=iui.gotoView(_50.hash.substr(1),false);setTimeout(function(){_50.removeAttribute("selected");},_51?0:500);}function followAjax(_52,_53){_52.setAttribute("selected","progress");iui.showPageByHref(_52.href,null,"GET",_53,function(){_52.removeAttribute("selected");});}function sendEvent(_54,_55,_56){if(_55){var _57=document.createEvent("UIEvent");_57.initEvent(_54,true,false);if(_56){for(i in _56){_57[i]=_56[i];}}_55.dispatchEvent(_57);}}function getPageFromLoc(){var _58;var _59=location.hash.match(/#_([^\?_]+)/);if(_59){_58=_59[1];}if(_58){_58=$(_58);}return _58;}function orientChangeHandler(){var _5a=window.orientation;switch(_5a){case 0:setOrientation(_f);break;case 90:case -90:setOrientation(_10);break;}}function checkOrientAndLocation(){if(!_e){if((window.innerWidth!=_7)||(window.innerHeight!=_8)){_7=window.innerWidth;_8=window.innerHeight;var _5b=(_7<_8)?_f:_10;setOrientation(_5b);}}if(location.hash!=_9){var _5c=location.hash.substr(_a.length);if((_5c=="")&&_4){_5c=_4.id;}iui.showPageById(_5c);}}function setOrientation(_5d){document.body.setAttribute("orient",_5d);if(_5d==_f){iui.removeClass(document.body,_10);iui.addClass(document.body,_f);}else{if(_5d==_10){iui.removeClass(document.body,_f);iui.addClass(document.body,_10);}else{iui.removeClass(document.body,_f);iui.removeClass(document.body,_10);}}setTimeout(scrollTo,100,0,1);}function showDialog(_5e){_6=_5e;_5e.setAttribute("selected","true");if(hasClass(_5e,"dialog")){showForm(_5e);}}function showForm(_5f){_5f.addEventListener("click",function(_60){},true);}function cancelDialog(_61){_61.removeAttribute("selected");}function updatePage(_62,_63){if(!_62.id){_62.id="__"+(++_c)+"__";}_9=_a+_62.id;if(!_63){location.replace(_9);}else{location.assign(_9);}_b.push(_62.id);var _64=$("pageTitle");if(_62.title){_64.innerHTML=_62.title;}var _65=_62.getAttribute("ttlclass");_64.className=_65?_65:"";if(_62.localName.toLowerCase()=="form"){showForm(_62);}var _66=$("backButton");if(_66){var _67=$(_b[_b.length-2]);if(_67&&!_62.getAttribute("hideBackButton")){_66.style.display="inline";_66.innerHTML=_67.title?_67.title:"Back";var _68=_67.getAttribute("bbclass");_66.className=(_68)?"button "+_68:"button";}else{_66.style.display="none";}}iui.busy=false;}function slidePages(_69,_6a,_6b){var _6c=(_6b?_69:_6a).getAttribute("axis");clearInterval(_d);sendEvent("iui.beforetransition",_69,{out:true});sendEvent("iui.beforetransition",_6a,{out:false});if(canDoSlideAnim()&&_6c!="y"){slide2(_69,_6a,_6b,slideDone);}else{slide1(_69,_6a,_6b,_6c,slideDone);}function slideDone(){if(!hasClass(_6a,"dialog")){_69.removeAttribute("selected");}_d=setInterval(checkOrientAndLocation,300);setTimeout(updatePage,0,_6a,_69);_69.removeEventListener("webkitTransitionEnd",slideDone,false);sendEvent("iui.aftertransition",_69,{out:true});sendEvent("iui.aftertransition",_6a,{out:false});if(_6b){sendEvent("iui.unload",_69);}}}function canDoSlideAnim(){return (iui.animOn)&&(typeof WebKitCSSMatrix=="object");}function slide1(_6d,_6e,_6f,_70,cb){if(_70=="y"){(_6f?_6d:_6e).style.top="100%";}else{_6e.style.left="100%";}scrollTo(0,1);_6e.setAttribute("selected","true");var _72=100;slide();var _73=setInterval(slide,_2);function slide(){_72-=_1;if(_72<=0){_72=0;clearInterval(_73);cb();}if(_70=="y"){_6f?_6d.style.top=(100-_72)+"%":_6e.style.top=_72+"%";}else{_6d.style.left=(_6f?(100-_72):(_72-100))+"%";_6e.style.left=(_6f?-_72:_72)+"%";}}}function slide2(_74,_75,_76,cb){_75.style.webkitTransitionDuration="0ms";var _78="translateX("+(_76?"-":"")+window.innerWidth+"px)";var _79="translateX("+(_76?"100%":"-100%")+")";_75.style.webkitTransform=_78;_75.setAttribute("selected","true");_75.style.webkitTransitionDuration="";function startTrans(){_74.style.webkitTransform=_79;_75.style.webkitTransform="translateX(0%)";}_74.addEventListener("webkitTransitionEnd",cb,false);setTimeout(startTrans,0);}function preloadImages(){var _7a=document.createElement("div");_7a.id="preloader";document.body.appendChild(_7a);}function submitForm(_7b){iui.addClass(_7b,"progress");iui.showPageByHref(_7b.getAttribute("action"),encodeForm(_7b),_7b.hasAttribute("method")?_7b.getAttribute("method"):"GET",null,function(){iui.removeClass(_7b,"progress");});}function encodeForm(_7c){function encode(_7d){for(var i=0;i<_7d.length;++i){log("input["+i+"]: "+_7d[i].name+" = "+_7d[i].value);if(_7d[i].name){var _7f=_7d[i];if(_7f.getAttribute("type")=="checkbox"&&!_7f.checked||_7f.getAttribute("type")=="radio"&&!_7f.checked||_7f.disabled){continue;}if(_7f.getAttribute("type")=="submit"){if(_7f.getAttribute("submitvalue")){_7f.removeAttribute("submitvalue");}else{continue;}}var _80=args[_7f.name];if(_80===undefined){args[_7f.name]=_7f.value;}else{if(_80 instanceof Array){_80.push(_7f.value);}else{args[_7f.name]=[_80,_7f.value];}}}}}var _81={};encode(_7c.getElementsByTagName("input"));encode(_7c.getElementsByTagName("textarea"));encode(_7c.getElementsByTagName("select"));encode(_7c.getElementsByTagName("button"));return _81;}function findParent(_82,_83){while(_82&&(_82.nodeType!=1||_82.localName.toLowerCase()!=_83)){_82=_82.parentNode;}return _82;}function hasClass(_84,_85){return iui.hasClass(_84,_85);}function replaceElementWithFrag(_86,_87){var _88=_86.parentNode;var _89=_86;while(_88.parentNode!=document.body){_88=_88.parentNode;_89=_89.parentNode;}_88.removeChild(_89);var _8a;while(_87.firstChild){_8a=_88.appendChild(_87.firstChild);sendEvent("iui.afterinsert",document.body,{insertedNode:_8a});}sendEvent("iui.afterinsertend",document.body,{fragment:_87});}function $(id){return document.getElementById(id);}function log(){if((window.console!=undefined)&&iui.logging){console.log.apply(console,arguments);}}})();